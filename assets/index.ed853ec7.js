var lt=Object.defineProperty;var ee=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var re=(t,e,o)=>e in t?lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,se=(t,e)=>{for(var o in e||(e={}))ke.call(e,o)&&re(t,o,e[o]);if(ee)for(var o of ee(e))Ce.call(e,o)&&re(t,o,e[o]);return t};var ie=(t,e)=>{var o={};for(var s in t)ke.call(t,s)&&e.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&ee)for(var s of ee(t))e.indexOf(s)<0&&Ce.call(t,s)&&(o[s]=t[s]);return o};var ve=(t,e,o)=>(re(t,typeof e!="symbol"?e+"":e,o),o);import{E as c,T as k,R as O,r as _,d as P,N as V,w as Fe,o as X,a as le,p as K,b as te,i as ce,c as Y,e as Be,P as q,f as E,g as Ne,h as ct,F as de,j as dt,t as Me,k as Te,m as Le,l as ft,n as ne,q as ut,s as pt,u as gt,v as ht,x as mt,y as wt,z as Dt,A as yt}from"./vendor.d6cf7675.js";const bt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}};bt();let Et=0;class St{constructor(){ve(this,"id");this.id=`${Et++}`}}const fe=new WeakMap,ue=new WeakMap,Ie=new WeakMap,pe=new WeakMap,oe=new WeakMap,J=new WeakMap,ge=new WeakMap,ae=new WeakMap,Re=new WeakMap,H=new WeakMap,he=new WeakMap,Pe=Symbol("placeholder"),me=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,xt=t=>U(t)&&t.nodeType===8,j=t=>U(t)&&t.nodeType===1,U=t=>{const e=me(t);return!!e&&t instanceof e.Node},Ae=t=>{const e=t&&t.anchorNode&&me(t.anchorNode);return!!e&&t instanceof e.Selection},We=t=>U(t)&&t.nodeType===3,Ot=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,kt=t=>{let[e,o]=t;if(j(e)&&e.childNodes.length){let s=o===e.childNodes.length,r=s?o-1:o;for([e,r]=_e(e,r,s?"backward":"forward"),s=r<o;j(e)&&e.childNodes.length;){const a=s?e.childNodes.length-1:0;e=vt(e,a,s?"backward":"forward")}o=s&&e.textContent!=null?e.textContent.length:0}return[e,o]},Ct=()=>!!(window.document.activeElement&&window.document.activeElement.shadowRoot),_e=(t,e,o)=>{const{childNodes:s}=t;let r=s[e],a=e,i=!1,u=!1;for(;(xt(r)||j(r)&&r.childNodes.length===0||j(r)&&r.getAttribute("contenteditable")==="false")&&!(i&&u);){if(a>=s.length){i=!0,a=e-1,o="backward";continue}if(a<0){u=!0,a=e+1,o="forward";continue}r=s[a],e=a,a+=o==="forward"?1:-1}return[r,e]},vt=(t,e,o)=>{const[s]=_e(t,e,o);return s},Ve=t=>{let e="";if(We(t)&&t.nodeValue)return t.nodeValue;if(j(t)){for(const s of Array.from(t.childNodes))e+=Ve(s);const o=getComputedStyle(t).getPropertyValue("display");(o==="block"||o==="list"||t.tagName==="BR")&&(e+=`
`)}return e},Ft=/data-slate-fragment="(.+?)"/m,Bt=t=>{const e=t.getData("text/html"),[,o]=e.match(Ft)||[];return o},Nt=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,je=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const we=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),De=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Mt=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),$e=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),Tt=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),Lt=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),It=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),z=!Tt&&!Mt&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",d={getWindow(t){const e=Ie.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},findKey(t,e){let o=ge.get(e);return o||(o=new St,ge.set(e,o)),o},findPath(t,e){const o=[];let s=e;for(;;){const r=ue.get(s);if(r==null){if(c.isEditor(s))return o;break}const a=fe.get(s);if(a==null)break;o.unshift(a),s=r}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(e)}`)},findDocumentOrShadowRoot(t){const e=d.toDOMNode(t,t),o=e.getRootNode();return(o instanceof Document||o instanceof ShadowRoot)&&o.getSelection!=null?o:e.ownerDocument},isFocused(t){return!!H.get(t)},isReadOnly(t){return!!Re.get(t)},blur(t){const e=d.toDOMNode(t,t),o=d.findDocumentOrShadowRoot(t);H.set(t,!1),o.activeElement===e&&e.blur()},focus(t){const e=d.toDOMNode(t,t),o=d.findDocumentOrShadowRoot(t);H.set(t,!0),o.activeElement!==e&&e.focus({preventScroll:!0})},deselect(t){d.toDOMNode(t,t);const{selection:e}=t,s=d.findDocumentOrShadowRoot(t).getSelection();s&&s.rangeCount>0&&s.removeAllRanges(),e&&k.deselect(t)},hasDOMNode(t,e,o={}){const{editable:s=!1}=o,r=d.toDOMNode(t,t);let a;try{a=j(e)?e:e.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return a?a.closest("[data-slate-editor]")===r&&(!s||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===r||!!a.getAttribute("data-slate-zero-width")):!1},insertData(t,e){t.insertData(e)},insertFragmentData(t,e){t.insertFragmentData(e)},insertTextData(t,e){t.insertTextData(e)},setFragmentData(t,e){t.setFragmentData(e)},toDOMNode(t,e){const o=ae.get(t),s=c.isEditor(e)?pe.get(t):o==null?void 0:o.get(d.findKey(t,e));if(!s)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return s},toDOMPoint(t,e){const[o]=c.node(t,e.path),s=d.toDOMNode(t,o);let r;c.void(t,{at:e})&&(e={path:e.path,offset:0});const a="[data-slate-string], [data-slate-zero-width]",i=Array.from(s.querySelectorAll(a));let u=0;for(const f of i){const p=f.childNodes[0];if(p==null||p.textContent==null)continue;const{length:D}=p.textContent,S=f.getAttribute("data-slate-length"),n=S==null?D:parseInt(S,10),g=u+n;if(e.offset<=g){const C=Math.min(D,Math.max(0,e.offset-u));r=[p,C];break}u=g}if(!r)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return r},toDOMRange(t,e){const{anchor:o,focus:s}=e,r=O.isBackward(e),a=d.toDOMPoint(t,o),i=O.isCollapsed(e)?a:d.toDOMPoint(t,s),f=d.getWindow(t).document.createRange(),[p,D]=r?i:a,[S,n]=r?a:i,C=!!(j(p)?p:p.parentElement).getAttribute("data-slate-zero-width"),y=!!(j(S)?S:S.parentElement).getAttribute("data-slate-zero-width");return f.setStart(p,C?1:D),f.setEnd(S,y?1:n),f},toSlateNode(t,e){let o=j(e)?e:e.parentElement;o&&!o.hasAttribute("data-slate-node")&&(o=o.closest("[data-slate-node]"));const s=o?oe.get(o):null;if(!s)throw new Error(`Cannot resolve a Slate node from DOM node: ${o}`);return s},findEventRange(t,e){"nativeEvent"in e&&(e=e.nativeEvent);const{clientX:o,clientY:s,target:r}=e;if(o==null||s==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=d.toSlateNode(t,e.target),i=d.findPath(t,a);if(c.isVoid(t,a)){const D=r.getBoundingClientRect(),S=t.isInline(a)?o-D.left<D.left+D.width-o:s-D.top<D.top+D.height-s,n=c.point(t,i,{edge:S?"start":"end"}),g=S?c.before(t,n):c.after(t,n);if(g)return c.range(t,g)}let u;const{document:f}=window;if(f.caretRangeFromPoint)u=f.caretRangeFromPoint(o,s);else{const D=f.caretPositionFromPoint(o,s);D&&(u=f.createRange(),u.setStart(D.offsetNode,D.offset),u.setEnd(D.offsetNode,D.offset))}if(!u)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return d.toSlateRange(t,u,{exactMatch:!1,suppressThrow:!1})},toSlatePoint(t,e,o){var n;const{exactMatch:s,suppressThrow:r}=o,[a,i]=s?e:kt(e),u=a.parentNode;let f=null,p=0;if(u){const g=u.closest('[data-slate-void="true"]');let C=u.closest("[data-slate-leaf]"),h=null;if(C){f=C.closest('[data-slate-node="text"]');const b=d.getWindow(t).document.createRange();b.setStart(f,0),b.setEnd(a,i);const x=b.cloneContents();[...Array.prototype.slice.call(x.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(x.querySelectorAll("[contenteditable=false]"))].forEach(M=>{M.parentNode.removeChild(M)}),p=x.textContent.length,h=f}else g&&(C=g.querySelector("[data-slate-leaf]"),C?(f=C.closest('[data-slate-node="text"]'),h=C,p=h.textContent.length,h.querySelectorAll("[data-slate-zero-width]").forEach(y=>{p-=y.textContent.length})):p=1);h&&p===h.textContent.length&&(u.hasAttribute("data-slate-zero-width")||we&&((n=h.textContent)==null?void 0:n.endsWith(`

`)))&&p--}if(!f){if(r)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const D=d.toSlateNode(t,f);return{path:d.findPath(t,D),offset:p}},toSlateRange(t,e,o){const{exactMatch:s,suppressThrow:r}=o,a=Ae(e)?e.anchorNode:e.startContainer;let i,u,f,p,D;if(a&&(Ae(e)?(i=e.anchorNode,u=e.anchorOffset,f=e.focusNode,p=e.focusOffset,$e&&Ct()?D=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:D=e.isCollapsed):(i=e.startContainer,u=e.startOffset,f=e.endContainer,p=e.endOffset,D=e.collapsed)),i==null||f==null||u==null||p==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const S=d.toSlatePoint(t,[i,u],{exactMatch:s,suppressThrow:r});if(!S)return null;const n=D?S:d.toSlatePoint(t,[f,p],{exactMatch:s,suppressThrow:r});if(!n)return null;let g={anchor:S,focus:n};return O.isExpanded(g)&&O.isForward(g)&&j(f)&&c.void(t,{at:g.focus,mode:"highest"})&&(g=c.unhangRange(t,g,{voids:!0})),g},hasRange(t,e){const{anchor:o,focus:s}=e;return c.hasPath(t,o.path)&&c.hasPath(t,s.path)}},ye=t=>{const e=_(typeof t=="function"?t():t);return[e,o=>{e.value=o}]},Rt=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Q=t=>Rt?Symbol(t):"[slate-vue]"+t,ze=Q("slate"),He=Q("slateStatic"),Pt=Q("editor_Focused"),Ue=Q("editor_readOnly"),Ke=Q("editor_Decorate"),At={value:Array,editor:{type:Object,required:!0},onChange:Function},Wt=P({name:"Slate",props:At,emits:["change"],setup(t,{emit:e,slots:o}){const[s,r]=ye(()=>{const g=t,{editor:p,value:D=[],onChange:S}=g,n=ie(g,["editor","value","onChange"]);if(!V.isNodeList(D))throw new Error(`[Slate] value is invalid! Expected a list of elementsbut got: ${JSON.stringify(D)}`);if(!c.isEditor(p))throw new Error(`[Slate] editor is invalid! you passed:${JSON.stringify(p)}`);return p.children=D,Object.assign(p,n),[p]}),[a,i]=ye(d.isFocused(t.editor)),u=()=>{var p;e("change",t.editor.children),(p=t.onChange)==null||p.call(t,t.editor.children),r([t.editor])};Fe(()=>{he.set(t.editor,u)});const f=()=>i(d.isFocused(t.editor));return X(()=>{document.addEventListener("focus",f,!0),document.addEventListener("blur",f,!0)}),le(()=>{he.set(t.editor,()=>{}),document.removeEventListener("focus",f,!0),document.removeEventListener("blur",f,!0)}),K(ze,s),K(He,t.editor),K(Pt,a.value),()=>(console.info("%c Slate Rerender ","background: #000;  padding:3px 0px; color: #fff;"),te(o,"default"))}}),_t={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},Vt={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},jt={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},v=t=>{const e=_t[t],o=Vt[t],s=jt[t],r=e&&ce(e),a=o&&ce(o),i=s&&ce(s);return u=>!!(r&&r(u)||je&&a&&a(u)||!je&&i&&i(u))};var F={isBold:v("bold"),isCompose:v("compose"),isMoveBackward:v("moveBackward"),isMoveForward:v("moveForward"),isDeleteBackward:v("deleteBackward"),isDeleteForward:v("deleteForward"),isDeleteLineBackward:v("deleteLineBackward"),isDeleteLineForward:v("deleteLineForward"),isDeleteWordBackward:v("deleteWordBackward"),isDeleteWordForward:v("deleteWordForward"),isExtendBackward:v("extendBackward"),isExtendForward:v("extendForward"),isExtendLineBackward:v("extendLineBackward"),isExtendLineForward:v("extendLineForward"),isItalic:v("italic"),isMoveLineBackward:v("moveLineBackward"),isMoveLineForward:v("moveLineForward"),isMoveWordBackward:v("moveWordBackward"),isMoveWordForward:v("moveWordForward"),isRedo:v("redo"),isSplitBlock:v("splitBlock"),isTransposeCharacter:v("transposeCharacter"),isUndo:v("undo")};function $t(){return Y(ze)}const zt=()=>Y(Ke),be=t=>{X(t),Be(t)};function Z(){return Y(He)}const Ht={isLast:Boolean,leaf:Object,parent:Object,text:Object},qe=P({name:"TextString",props:Ht,setup(t){const e=Z();return()=>{const{isLast:o,leaf:s,parent:r,text:a}=t,i=d.findPath(e,a),u=q.parent(i);return e.isVoid(r)?E(Ee,{length:V.string(r).length},null):s.text===""&&r.children[r.children.length-1]===a&&!e.isInline(r)&&c.string(e,u)===""?E(Ee,{isLineBreak:!0},null):s.text===""?E(Ee,null,null):o&&s.text.slice(-1)===`
`?E(Je,{isTrailing:!0,text:s.text},null):E(Je,{text:s.text},null)}}}),Je=P({name:"TextString",props:{text:String,isTrailing:Boolean},setup(t){const e=_(null),o=_(0);return be(()=>{e.value&&e.value.textContent!==t.text&&(o.value+=1)}),()=>E("span",{"data-slate-string":!0,ref:e,key:o.value},[t.text,t.isTrailing?`
`:null])}}),Ee=P({name:"ZeroWidthString",props:{length:Number,isLineBreak:Boolean},render(){const{length:t=0,isLineBreak:e=!1}=this.$props;return E("span",{"data-slate-zero-width":e?"n":"z","data-slate-length":t},["\uFEFF",e?E("br",null,null):null])}}),Ut={isLast:Boolean,leaf:Object,parent:Object,text:Object},Kt=P({name:"Leaf",props:Ut,setup(t){const e=_(null);return Ne([()=>t.leaf,e],()=>{const s=e==null?void 0:e.value,r=document.querySelector('[data-slate-editor="true"]');!s||!r||(r.style.minHeight=`${s.clientHeight}px`)}),ct(()=>{document.querySelector('[data-slate-editor="true"]').style.minHeight="auto"}),()=>{const{leaf:s,isLast:r,text:a,parent:i}=t,u={"data-slate-leaf":!0};return console.info("%c Leaf Rerender ","background: green;  padding:3px 0px; color: #fff;"),console.log(s),E(Jt,{attributes:u,leaf:s,text:a},{default:()=>[s[Pe]?E(de,null,[E(rn,{attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:e}},{default:()=>[s.placeholder]}),E(qe,{isLast:r,leaf:s,parent:i,text:a},null)]):E(qe,{isLast:r,leaf:s,parent:i,text:a},null)]})}}}),qt={leaf:Object,text:Object,attributes:Object},Jt=P({name:"DefaultLeaf",props:qt,render(){return E("span",this.$props.attributes,[te(this.$slots,"default")])}}),Gt={decorations:Array,isLast:Boolean,parent:Object,text:Object},Ge=P({name:"Text",props:Gt,setup(t){const e=Z(),o=_(null),{decorations:s,text:r}=t,a=dt.decorations(r,s),i=d.findKey(e,r),u=()=>{const f=ae.get(e);o.value?(f==null||f.set(i,o.value),J.set(r,o.value),oe.set(o.value,r)):(f==null||f.delete(i),J.delete(r))};return X(u),Be(u),()=>{console.info("%c Text Rerender ","background: blue; padding:3px 0px; color: #fff;"),console.info(Me(t));const{isLast:f,parent:p,text:D}=t;return E("span",{"data-slate-node":"text",ref:o},[a.map((S,n)=>E(Kt,{isLast:f&&n===a.length-1,key:`${i.id}-${n}`,leaf:S,text:D,parent:p},null))])}}});function Xt(){return Y(Ue)}function Yt(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ft(t)}const Qt={decorations:Array,element:Object,selection:Object},Zt=P({name:"Element",props:Qt,setup(t){const e=_(),o=Z(),s=Xt();return be(()=>{const r=t.element,a=d.findKey(o,r),i=ae.get(o);e.value?(i==null||i.set(a,e.value),J.set(r,e.value),oe.set(e.value,r)):(i==null||i.delete(a),J.delete(r))}),()=>{const{decorations:r,element:a,selection:i}=t,u=o.isInline(a),f={"data-slate-node":"element",ref:e};if(u&&(f["data-slate-inline"]=!0),!u&&c.hasInlines(o,a)){const S=V.string(a),n=Te(S);n==="rtl"&&(f.dir=n)}let p,D;return c.isVoid(o,a)&&(f["data-slate-void"]=!0,!s&&u&&(f.contentEditable=!1),p=u?"span":"div",[[D]]=V.texts(a),fe.set(D,0),ue.set(D,a)),console.info("%c Element Rerender ","background: yellow; padding:3px 0px; color: #000;"),E(tn,{element:a,attributes:f},{default:()=>[c.isVoid(o,a)?s?null:E(p,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},{default:()=>[E(Ge,{decorations:[],isLast:!1,parent:a,text:D},null)]}):E(Xe,{decorations:r,node:a,selection:i},null)]})}}}),en={element:Object,attributes:Object},tn=P({name:"DefaultElement",props:en,setup(t,{slots:e}){const o=Z();return()=>{let s;const{attributes:r,element:a}=t,i=o.isInline(a)?"span":"div";return E(i,Le(r,{style:{position:"relative"}}),Yt(s=te(e,"default"))?s:{default:()=>[s]})}}}),nn={decorations:Array,node:Object,selection:Object},Xe=P({name:"Children",props:nn,setup(t){return()=>{const e=zt(),o=Z(),{decorations:s,node:r,selection:a}=t,i=d.findPath(o,r),u=ne.isElement(r)&&!o.isInline(r)&&c.hasInlines(o,r);return console.info("%c Children Rerender ","background: #ed143d7d; padding:3px 0px; color: #fff;"),E(de,null,[r.children.map((f,p)=>{const D=i.concat(p),S=r.children[p],n=d.findKey(o,S),g=c.range(o,D),C=a&&O.intersection(g,a),h=e([S,D]);for(const y of s){const b=O.intersection(y,g);b&&h.push(b)}return fe.set(S,p),ue.set(S,r),ne.isElement(S)?E(Zt,{decorations:h,element:S,key:n.id,selection:C},null):E(Ge,{decorations:h,key:n.id,isLast:u&&p===r.children.length-1,parent:r,text:S},null)})])}}}),on={decorate:Function,onDOMBeforeInput:Function,placeholder:String,readOnly:Boolean,role:String,style:Object,scrollSelectionIntoView:Function,as:String,autofocus:Boolean,spellcheck:Boolean,autocapitalize:Boolean,autocorrect:Boolean},an=P({name:"Editable",props:on,setup(t){var S;const e=$t(),[o,s]=ye(!1),r=_(),a=_([]);Ne([e,()=>t.readOnly],()=>{var n;Re.set(e.value[0],(n=t.readOnly)!=null?n:!1)},{immediate:!0});const i={isComposing:!1,hasInsertPrefixInCompositon:!1,isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null};be(()=>{r.value&&t.autofocus&&r.value.focus();const{scrollSelectionIntoView:n=Qe}=t,g=e.value[0];let C;r.value&&(C=me(r.value))?(Ie.set(g,C),pe.set(g,r.value),J.set(g,r.value),oe.set(r.value,g)):J.delete(g);const{selection:h}=g,b=d.findDocumentOrShadowRoot(g).getSelection();if(i.isComposing||!b||!d.isFocused(g))return;const x=b.type!=="None";if(!h&&!x)return;const T=pe.get(g);let M=!1;if(T.contains(b.anchorNode)&&T.contains(b.focusNode)&&(M=!0),x&&M&&h){const $=d.toSlateRange(g,b,{exactMatch:!0,suppressThrow:!0});if($&&O.equals($,h))return}if(h&&!d.hasRange(g,h)){g.selection=d.toSlateRange(g,b,{exactMatch:!1,suppressThrow:!1});return}i.isUpdatingSelection=!0;const B=h&&d.toDOMRange(g,h);B?(O.isBackward(h)?b.setBaseAndExtent(B.endContainer,B.endOffset,B.startContainer,B.startOffset):b.setBaseAndExtent(B.startContainer,B.startOffset,B.endContainer,B.endOffset),n(g,B)):b.removeAllRanges(),setTimeout(()=>{B&&we&&d.toDOMNode(g,g).focus(),i.isUpdatingSelection=!1})});const f=n=>{const{onDOMBeforeInput:g,readOnly:C=!1}=t,h=e.value[0];if(!C&&W(h,n.target)&&!sn(n,g)){const{selection:y}=h,{inputType:b}=n,x=n.dataTransfer||n.data||void 0;if(b==="insertCompositionText"||b==="deleteCompositionText")return;let T=!1;if(b==="insertText"&&y&&O.isCollapsed(y)&&n.data&&n.data.length===1&&/[a-z ]/i.test(n.data)&&y.anchor.offset!==0){T=!0,h.marks&&(T=!1);const{anchor:M}=y,B=c.above(h,{at:M,match:$=>c.isInline(h,$),mode:"highest"});if(B){const[,$]=B;c.isEnd(h,y.anchor,$)&&(T=!1)}}if(T||n.preventDefault(),!b.startsWith("delete")||b.startsWith("deleteBy")){const[M]=n.getTargetRanges();if(M){const B=d.toSlateRange(h,M,{exactMatch:!1,suppressThrow:!1});(!y||!O.equals(y,B))&&k.select(h,B)}}if(y&&O.isExpanded(y)&&b.startsWith("delete")){const M=b.endsWith("Backward")?"backward":"forward";c.deleteFragment(h,{direction:M});return}switch(b){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{c.deleteFragment(h);break}case"deleteContent":case"deleteContentForward":{c.deleteForward(h);break}case"deleteContentBackward":{c.deleteBackward(h);break}case"deleteEntireSoftLine":{c.deleteBackward(h,{unit:"line"}),c.deleteForward(h,{unit:"line"});break}case"deleteHardLineBackward":{c.deleteBackward(h,{unit:"block"});break}case"deleteSoftLineBackward":{c.deleteBackward(h,{unit:"line"});break}case"deleteHardLineForward":{c.deleteForward(h,{unit:"block"});break}case"deleteSoftLineForward":{c.deleteForward(h,{unit:"line"});break}case"deleteWordBackward":{c.deleteBackward(h,{unit:"word"});break}case"deleteWordForward":{c.deleteForward(h,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{c.insertBreak(h);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{b==="insertFromComposition"&&(i.isComposing&&s(!1),i.isComposing=!1);const M=d.getWindow(h);x instanceof M.DataTransfer?d.insertData(h,x):typeof x=="string"&&(T?a.value.push(()=>c.insertText(h,x)):c.insertText(h,x));break}}}};X(()=>{r.value&&z&&r.value.addEventListener("beforeinput",f)}),le(()=>{r.value&&z&&r.value.removeEventListener("beforeinput",f)});const p=ut(()=>{if(!i.isComposing&&!i.isUpdatingSelection&&!i.isDraggingInternally){const n=e.value[0],g=d.findDocumentOrShadowRoot(n),{activeElement:C}=g,h=d.toDOMNode(n,n),y=g.getSelection();if(C===h?(i.latestElement=C,H.set(n,!0)):H.delete(n),!y)return k.deselect(n);const{anchorNode:b,focusNode:x}=y,T=W(n,b)||Ze(n,b),M=W(n,x)||Ze(n,x);if(T&&M){const B=d.toSlateRange(n,y,{exactMatch:!1,suppressThrow:!1});k.select(n,B)}}},100),D=()=>setTimeout(p);return X(()=>{const n=e.value[0];d.getWindow(n).document.addEventListener("selectionchange",D)}),le(()=>{const n=e.value[0];d.getWindow(n).document.removeEventListener("selectionchange",D)}),K(Ue,t.readOnly),K(Ke,(S=t.decorate)!=null?S:Ye),()=>{const n=e.value[0],{placeholder:g,decorate:C=Ye}=t,h=C([n,[]]);if(g&&n.children.length===1&&Array.from(V.texts(n)).length===1&&V.string(n)===""&&!o.value){const l=c.start(n,[]);h.push({[Pe]:!0,placeholder:g,anchor:l,focus:l})}const Se=t,{readOnly:y=!1,onDOMBeforeInput:b,scrollSelectionIntoView:x=Qe,style:T={},as:M="div",role:B="textbox",autocorrect:$,autocapitalize:nt,spellcheck:ot}=Se,L=ie(Se,["readOnly","onDOMBeforeInput","scrollSelectionIntoView","style","as","role","autocorrect","autocapitalize","spellcheck"]),at=z?ot:!1,rt=z?$:"false",st=z?nt:"false";return console.info("%c Editable Rerender ","background: #40b3ec;  padding:3px 0px; color: #fff;"),E(M,Le({"data-gramm":!1},L,{role:y?void 0:B,spellCheck:at,autoCorrect:rt,autoCapitalize:st,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:!y,zindex:-1,suppressContentEditableWarning:!0,ref:r,style:se({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},T),onBeforeInput:l=>{if(!z&&!y&&!I(l,L.onBeforeInput)&&W(n,l.target)&&(l.preventDefault(),!i.isComposing)){const w=l.data;c.insertText(n,w)}},onInput:()=>{for(const l of a.value)l();a.value=[]},onBlur:l=>{if(y||i.isUpdatingSelection||!W(n,l.target)||I(l,L.onBlur))return;const w=d.findDocumentOrShadowRoot(n);if(i.latestElement===w.activeElement)return;const{relatedTarget:m}=l,A=d.toDOMNode(n,n);if(m!==A&&!(j(m)&&m.hasAttribute("data-slate-spacer"))){if(m!=null&&U(m)&&d.hasDOMNode(n,m)){const N=d.toSlateNode(n,m);if(ne.isElement(N)&&!n.isVoid(N))return}if(De){const N=w.getSelection();N==null||N.removeAllRanges()}H.delete(n)}},onClick:l=>{if(!y&&G(n,l.target)&&!I(l,L.onClick)&&U(l.target)){const w=d.toSlateNode(n,l.target),m=d.findPath(n,w);if(c.hasPath(n,m)&&V.get(n,m)===w){const N=c.start(n,m),R=c.end(n,m),xe=c.void(n,{at:N}),Oe=c.void(n,{at:R});if(xe&&Oe&&q.equals(xe[1],Oe[1])){const it=c.range(n,N);k.select(n,it)}}}},onCompositionEnd:l=>{if(W(n,l.target)&&!I(l,L.onCompositionEnd)&&(i.isComposing&&s(!1),i.isComposing=!1,!De&&!Lt&&!Nt&&!It&&l.data&&c.insertText(n,l.data),n.selection&&O.isCollapsed(n.selection))){const w=n.selection.anchor.path,m=V.leaf(n,w);i.hasInsertPrefixInCompositon&&(i.hasInsertPrefixInCompositon=!1,c.withoutNormalizing(n,()=>{const A=m.text.replace(/^\uFEFF/,"");k.delete(n,{distance:m.text.length,reverse:!0}),k.insertText(n,A)}))}},onCompositionUpdate:l=>{W(n,l.target)&&!I(l,L.onCompositionUpdate)&&(!i.isComposing&&s(!0),i.isComposing=!0)},onCompositionStart:l=>{if(W(n,l.target)&&!I(l,L.onCompositionStart)){const{selection:w,marks:m}=n;if(w){if(O.isExpanded(w)){c.deleteFragment(n);return}const A=c.above(n,{match:N=>c.isInline(n,N),mode:"highest"});if(A){const[,N]=A;if(c.isEnd(n,w.anchor,N)){const R=c.after(n,N);k.setSelection(n,{anchor:R,focus:R})}}m&&(i.hasInsertPrefixInCompositon=!0,k.insertNodes(n,se({text:"\uFEFF"},m),{select:!0}))}}},onCopy:l=>{W(n,l.target)&&!I(l,L.onCopy)&&(l.preventDefault(),l.clipboardData&&d.setFragmentData(n,l.clipboardData))},onCut:l=>{if(!y&&W(n,l.target)&&!I(l,L.onCut)){l.preventDefault(),l.clipboardData&&d.setFragmentData(n,l.clipboardData);const{selection:w}=n;if(w)if(O.isExpanded(w))c.deleteFragment(n);else{const m=V.parent(n,w.anchor.path);c.isVoid(n,m)&&k.delete(n)}}},onDragOver:l=>{if(G(n,l.target)&&!I(l,L.onDragOver)){const w=d.toSlateNode(n,l.target);c.isVoid(n,w)&&l.preventDefault()}},onDragStart:l=>{if(!y&&G(n,l.target)&&!I(l,L.onDragStart)){const w=d.toSlateNode(n,l.target),m=d.findPath(n,w);if(c.isVoid(n,w)||c.void(n,{at:m,voids:!0})){const N=c.range(n,m);k.select(n,N)}i.isDraggingInternally=!0,l.dataTransfer&&d.setFragmentData(n,l.dataTransfer)}},onDrop:l=>{if(!y&&G(n,l.target)&&!I(l,L.onDrop)){l.preventDefault();const w=n.selection,m=d.findEventRange(n,l),A=l.dataTransfer;k.select(n,m),i.isDraggingInternally&&(w&&k.delete(n,{at:w}),i.isDraggingInternally=!1),A&&d.insertData(n,A),d.isFocused(n)||d.focus(n)}},onDragEnd:l=>{!y&&i.isDraggingInternally&&G(n,l.target)&&!I(l,L.onDragEnd)&&(i.isDraggingInternally=!1)},onFocus:l=>{if(!y&&!i.isUpdatingSelection&&W(n,l.target)&&!I(l,L.onFocus)){const w=d.toDOMNode(n,n),m=d.findDocumentOrShadowRoot(n);if(i.latestElement=m.activeElement,we&&l.target!==w){w.focus();return}H.set(n,!0)}},onKeyDown:l=>{if(!y&&!i.isComposing&&W(n,l.target)&&!I(l,L.onKeyDown)){const w=l,{selection:m}=n,A=n.children[m!==null?m.focus.path[0]:0],N=Te(V.string(A))==="rtl";if(F.isRedo(w)){l.preventDefault();const R=n;typeof R.redo=="function"&&R.redo();return}if(F.isUndo(w)){l.preventDefault();const R=n;typeof R.undo=="function"&&R.undo();return}if(F.isMoveLineBackward(w)){l.preventDefault(),k.move(n,{unit:"line",reverse:!0});return}if(F.isMoveLineForward(w)){l.preventDefault(),k.move(n,{unit:"line"});return}if(F.isExtendLineBackward(w)){l.preventDefault(),k.move(n,{unit:"line",edge:"focus",reverse:!0});return}if(F.isExtendLineForward(w)){l.preventDefault(),k.move(n,{unit:"line",edge:"focus"});return}if(F.isMoveBackward(w)){l.preventDefault(),m&&O.isCollapsed(m)?k.move(n,{reverse:!N}):k.collapse(n,{edge:"start"});return}if(F.isMoveForward(w)){l.preventDefault(),m&&O.isCollapsed(m)?k.move(n,{reverse:N}):k.collapse(n,{edge:"end"});return}if(F.isMoveWordBackward(w)){l.preventDefault(),m&&O.isExpanded(m)&&k.collapse(n,{edge:"focus"}),k.move(n,{unit:"word",reverse:!N});return}if(F.isMoveWordForward(w)){l.preventDefault(),m&&O.isExpanded(m)&&k.collapse(n,{edge:"focus"}),k.move(n,{unit:"word",reverse:N});return}if(z){if(($e||De)&&m&&(F.isDeleteBackward(w)||F.isDeleteForward(w))&&O.isCollapsed(m)){const R=V.parent(n,m.anchor.path);if(ne.isElement(R)&&c.isVoid(n,R)&&c.isInline(n,R)){l.preventDefault(),c.deleteBackward(n,{unit:"block"});return}}}else{if(F.isBold(w)||F.isItalic(w)||F.isTransposeCharacter(w)){l.preventDefault();return}if(F.isSplitBlock(w)){l.preventDefault(),c.insertBreak(n);return}if(F.isDeleteBackward(w)){l.preventDefault(),m&&O.isExpanded(m)?c.deleteFragment(n,{direction:"backward"}):c.deleteBackward(n);return}if(F.isDeleteForward(w)){l.preventDefault(),m&&O.isExpanded(m)?c.deleteFragment(n,{direction:"forward"}):c.deleteForward(n);return}if(F.isDeleteLineBackward(w)){l.preventDefault(),m&&O.isExpanded(m)?c.deleteFragment(n,{direction:"backward"}):c.deleteBackward(n,{unit:"line"});return}if(F.isDeleteLineForward(w)){l.preventDefault(),m&&O.isExpanded(m)?c.deleteFragment(n,{direction:"forward"}):c.deleteForward(n,{unit:"line"});return}if(F.isDeleteWordBackward(w)){l.preventDefault(),m&&O.isExpanded(m)?c.deleteFragment(n,{direction:"backward"}):c.deleteBackward(n,{unit:"word"});return}if(F.isDeleteWordForward(w)){l.preventDefault(),m&&O.isExpanded(m)?c.deleteFragment(n,{direction:"forward"}):c.deleteForward(n,{unit:"word"});return}}}},onPaste:l=>{!y&&W(n,l.target)&&!I(l,L.onPaste)&&(!z||Ot(l))&&(l.preventDefault(),l.clipboardData&&d.insertData(n,l.clipboardData))}}),{default:()=>[E(Xe,{decorations:h,node:n,selection:n.selection},null)]})}}}),Ye=()=>[],rn=P({props:{attributes:Object},render(){return E("span",this.$props.attributes,[te(this.$slots,"default")])}}),Qe=(t,e)=>{const o=e.startContainer.parentElement;o.getBoundingClientRect=e.getBoundingClientRect.bind(e),pt(o,{scrollMode:"if-needed"}),delete o.getBoundingClientRect},W=(t,e)=>U(e)&&d.hasDOMNode(t,e,{editable:!0}),sn=(t,e)=>{if(!e)return!1;const o=e(t);return o!=null?o:t.defaultPrevented},G=(t,e)=>U(e)&&d.hasDOMNode(t,e),Ze=(t,e)=>{const o=G(t,e)&&d.toSlateNode(t,e);return c.isVoid(t,o)},I=(t,e)=>{if(!e)return!1;const o=e(t);return o!=null?o:t.defaultPrevented},et=(t,e)=>{const o=(e.top+e.bottom)/2;return t.top<=o&&t.bottom>=o},tt=(t,e,o)=>{const s=d.toDOMRange(t,e).getBoundingClientRect(),r=d.toDOMRange(t,o).getBoundingClientRect();return et(s,r)&&et(r,s)},ln=(t,e)=>{const o=c.range(t,O.end(e)),s=Array.from(c.positions(t,{at:e}));let r=0,a=s.length,i=Math.floor(a/2);if(tt(t,c.range(t,s[r]),o))return c.range(t,s[r],o);if(s.length<2)return c.range(t,s[s.length-1],o);for(;i!==s.length&&i!==r;)tt(t,c.range(t,s[i]),o)?a=i:r=i,i=Math.floor((r+a)/2);return c.range(t,s[a],o)},cn=t=>{const e=t,{apply:o,onChange:s,deleteBackward:r}=e;return ae.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return r(a);if(t.selection&&O.isCollapsed(t.selection)){const i=c.above(t,{match:u=>c.isBlock(t,u),at:t.selection});if(i){const[,u]=i,f=c.range(t,u,t.selection.anchor),p=ln(e,f);O.isCollapsed(p)||k.delete(t,{at:p})}}},e.apply=a=>{const i=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[u,f]of c.levels(e,{at:a.path})){const p=d.findKey(e,u);i.push([f,p])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[u,f]of c.levels(e,{at:q.parent(a.path)})){const p=d.findKey(e,u);i.push([f,p])}break}case"move_node":{for(const[u,f]of c.levels(e,{at:q.common(q.parent(a.path),q.parent(a.newPath))})){const p=d.findKey(e,u);i.push([f,p])}break}}o(a);for(const[u,f]of i){const[p]=c.node(e,u);ge.set(p,f)}},e.setFragmentData=a=>{const{selection:i}=e;if(!i)return;const[u,f]=O.edges(i),p=c.void(e,{at:u.path}),D=c.void(e,{at:f.path});if(O.isCollapsed(i)&&!p)return;const S=d.toDOMRange(e,i);let n=S.cloneContents(),g=n.childNodes[0];if(n.childNodes.forEach(x=>{x.textContent&&x.textContent.trim()!==""&&(g=x)}),D){const[x]=D,T=S.cloneRange(),M=d.toDOMNode(e,x);T.setEndAfter(M),n=T.cloneContents()}if(p&&(g=n.querySelector("[data-slate-spacer]")),Array.from(n.querySelectorAll("[data-slate-zero-width]")).forEach(x=>{const T=x.getAttribute("data-slate-zero-width")==="n";x.textContent=T?`
`:""}),We(g)){const x=document.createElement("span");x.style.whiteSpace="pre",x.appendChild(g),n.appendChild(x),g=x}const C=e.getFragment(),h=JSON.stringify(C),y=window.btoa(encodeURIComponent(h));g.setAttribute("data-slate-fragment",y),a.setData("application/x-slate-fragment",y);const b=document.createElement("div");return b.appendChild(n),b.setAttribute("hidden","true"),document.body.appendChild(b),a.setData("text/html",b.innerHTML),a.setData("text/plain",Ve(b)),document.body.removeChild(b),a},e.insertData=a=>{e.insertFragmentData(a),e.insertTextData(a)},e.insertFragmentData=a=>{const i=a.getData("application/x-slate-fragment")||Bt(a);if(i){const u=decodeURIComponent(window.atob(i)),f=JSON.parse(u);e.insertFragment(f);return}},e.insertTextData=a=>{const i=a.getData("text/plain");if(i){const u=i.split(/\r\n|\r|\n/);let f=!1;for(const p of u)f&&k.splitNodes(e,{always:!0}),e.insertText(p),f=!0}},e.onChange=()=>{var a;(a=he.get(e))==null||a(),s()},e};gt(!1);var dn={setup(){const t=wt({count:0,o:{count:0},readOnly:!1,autofocus:!1}),e=cn(Dt());let o=_([{type:"paragraph",children:[{text:"This is editable plain text, just like a <textarea>!"}]}]);const s=a=>{console.log("app",Me(a)),o.value=a},r=_(0);return K("o",r),()=>E(de,null,[E(Wt,{editor:e,value:o.value,onChange:s},{default:()=>[E(an,{placeholder:"Typo anything...",readOnly:t.readOnly,autofocus:t.autofocus},null)]}),E("p",null,null),E(fn,{onChange:()=>{t.readOnly=!t.readOnly},title:"readOnly",flag:t.readOnly},null)])}};const fn=P({props:{flag:Boolean,onChange:Function,title:String},setup(t){return()=>{const e=`${ht.exports.random()}`;return E("span",null,[E("input",{type:"checkbox",id:e,checked:t.flag,onChange:t.onChange},null),E("label",{for:e},[t.title])])}}});P({setup(t){const e=Y("o"),o=_(0);return Fe(()=>{console.log(o.value)}),()=>(console.log("children rerender",e),E("p",{onClick:()=>o.value+=1},[mt("props: "),e.value]))}});yt(dn).mount("#app");
